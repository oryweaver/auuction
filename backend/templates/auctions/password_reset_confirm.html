{% extends "auctions/_auth_base.html" %}
{% block title %}Choose a new password{% endblock %}
{% block header %}
  {% if validlink %}
    <h1>Choose a new password</h1>
    <p class="muted">Enter your new password below.</p>
  {% else %}
    <h1>Invalid or expired link</h1>
  {% endif %}
{% endblock %}
{% block content %}
  {% if validlink %}
    <form method="post" novalidate>
      {% csrf_token %}
      {% if form.non_field_errors %}
        <div class="errorlist">{{ form.non_field_errors }}</div>
      {% endif %}
      <div class="field">
        <label for="id_new_password1">New password</label>
        {{ form.new_password1 }}
        {% if form.new_password1.errors %}
          <div class="errorlist">{{ form.new_password1.errors }}</div>
        {% endif %}
      </div>
      <div class="field">
        <label for="id_new_password2">Confirm new password</label>
        {{ form.new_password2 }}
        {% if form.new_password2.errors %}
          <div class="errorlist">{{ form.new_password2.errors }}</div>
        {% endif %}
      </div>
      <div class="actions">
        <button type="submit">Set new password</button>
        <a href="{% url 'auctions:login' %}">Back to login</a>
      </div>
    </form>
  {% else %}
    <p class="muted">This reset link is invalid or has expired. Please request a new one.</p>
    <p><a href="{% url 'auctions:password_reset' %}">Request new reset link</a></p>
  {% endif %}
{% endblock %}
